{% extends 'base.html' %}
{% load static %}

{% block content %}
<main class="mx-auto px-4 py-6 max-w-screen-lg">

  <!-- HEADER -->
  <header class="mb-6 flex items-center justify-between">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">Editar Cliente</h1>
    <div class="flex gap-2">
      <a href="{% url 'backoffice:listar_clientes' %}"
         class="inline-flex items-center gap-2 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-4 py-2 text-sm font-semibold text-gray-800 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700">
        <i class="fa-solid fa-arrow-left"></i> Volver
      </a>
      <button form="form-cliente"
              class="inline-flex items-center gap-2 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 text-sm font-semibold">
        <i class="fa-solid fa-save"></i> Guardar
      </button>
    </div>
  </header>

  <!-- TABS -->
  <div class="flex border-b border-gray-200 dark:border-gray-700 mb-4">
    <button id="tab-btn-cliente"
            class="py-2 px-4 text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400 focus:outline-none hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
            onclick="openTab('cliente')">
      Datos del Cliente
    </button>
    <button id="tab-btn-contactos"
            class="py-2 px-4 text-gray-600 dark:text-gray-300 focus:outline-none hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
            onclick="openTab('contactos')">
      Contactos
    </button>
  </div>

  <!-- TAB: CLIENTE -->
  <section id="tab-content-cliente" class="rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-sm p-4">
    <form id="form-cliente" method="POST" action="" novalidate>
      {% csrf_token %}

      <!-- DATOS PERSONALES -->
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Datos Personales</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
        <div>
          <label for="nombre" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nombre</label>
          <input type="text" id="nombre" name="nombre" autocomplete="given-name" placeholder="Ej: Juan"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.nombre }}">
        </div>
        <div>
          <label for="apellidos" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Apellidos</label>
          <input type="text" id="apellidos" name="apellidos" autocomplete="family-name" placeholder="Ej: Pérez Díaz"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.apellidos }}">
        </div>
      </div>

      <!-- IDENTIFICACIÓN -->
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Identificación</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 mb-4">
        <div>
          <label for="pasaporte" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Pasaporte</label>
          <input type="text" id="pasaporte" name="pasaporte" placeholder="H1234567"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.pasaporte }}">
        </div>
        <div>
          <label for="carnet_identidad" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Carnet de Identidad</label>
          <input type="text" id="carnet_identidad" name="carnet_identidad" placeholder="90123456789"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.carnet_identidad }}">
        </div>
        <div>
          <label for="licencia" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Licencia</label>
          <input type="text" id="licencia" name="licencia" placeholder="B123456"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.licencia }}">
        </div>
        <div>
          <label for="pasaporte_licencia" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Pasaporte/Licencia (extra)</label>
          <input type="text" id="pasaporte_licencia" name="pasaporte_licencia" placeholder="Dato adicional"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.pasaporte_licencia }}">
        </div>
      </div>

      <!-- CONTACTO -->
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Datos de Contacto</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
        <div>
          <label for="telefono_principal" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Teléfono Principal</label>
          <input type="tel" id="telefono_principal" name="telefono_principal" autocomplete="tel"
                 placeholder="+53 55555555"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.telefono_principal }}">
        </div>
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
          <input type="email" id="email" name="email" autocomplete="email" placeholder="cliente@ejemplo.com"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.email }}">
        </div>
      </div>

      <!-- DIRECCIÓN -->
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Dirección</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
        <div>
          <label for="direccion" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Dirección</label>
          <input type="text" id="direccion" name="direccion" autocomplete="address-line1"
                 placeholder="Calle 10 No. 50"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.direccion }}">
        </div>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label for="ciudad" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Ciudad</label>
            <input type="text" id="ciudad" name="ciudad" autocomplete="address-level2" placeholder="Miami"
                   class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                   value="{{ cliente.ciudad }}">
          </div>
          <div>
            <label for="estado" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Estado</label>
            <input type="text" id="estado" name="estado" autocomplete="address-level1" placeholder="Florida"
                   class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                   value="{{ cliente.estado }}">
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
        <div>
          <label for="pais" class="block text-sm font-medium text-gray-700 dark:text-gray-300">País</label>
          <input type="text" id="pais" name="pais" autocomplete="country-name" placeholder="USA"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.pais }}">
        </div>
        <div>
          <label for="zip_code" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ZIP</label>
          <input type="text" id="zip_code" name="zip_code" autocomplete="postal-code" placeholder="33174"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.zip_code }}">
        </div>
      </div>

      <!-- OTROS -->
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Otros</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4">
        <div>
          <label for="fecha_nacimiento" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Fecha de Nacimiento</label>
          <input type="date" id="fecha_nacimiento" name="fecha_nacimiento"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"
                 value="{{ cliente.fecha_nacimiento|date:'Y-m-d' }}">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">¿VIP?</label>
          <div class="flex items-center">
            <input type="checkbox" id="es_vip" name="es_vip"
                   class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-400 border-gray-300 dark:border-gray-600 rounded"
                   {% if cliente.es_vip %}checked{% endif %}>
            <label for="es_vip" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Marcar como VIP</label>
          </div>
        </div>
      </div>

      <div class="mb-4">
        <label for="observaciones" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Observaciones</label>
        <textarea id="observaciones" name="observaciones" rows="3" placeholder="Notas importantes…"
                  class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">{{ cliente.observaciones }}</textarea>
      </div>

      <!-- ACCIONES (duplicadas arriba) -->
      <div class="mt-2 flex gap-2">
        <a href="{% url 'backoffice:listar_clientes' %}"
           class="inline-flex items-center gap-2 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-100 px-5 py-2 text-sm font-semibold">
          <i class="fas fa-times-circle"></i> Cancelar
        </a>
        <button class="inline-flex items-center gap-2 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 text-sm font-semibold">
          <i class="fas fa-check"></i> Guardar
        </button>
      </div>
    </form>
  </section>

  <!-- TAB: CONTACTOS -->
  <section id="tab-content-contactos" class="rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-sm p-4 hidden">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-gray-900 dark:text-white">Contactos de {{ cliente.nombre }} {{ cliente.apellidos }}</h2>
      <button class="px-4 py-2 rounded-full bg-green-600 hover:bg-green-700 text-white focus:outline-none focus:ring-2 focus:ring-green-500 dark:focus:ring-green-400"
              onclick="openModal()">
        Agregar Contacto
      </button>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm">
        <thead class="bg-gray-50 dark:bg-gray-800">
          <tr>
            <th class="px-4 py-2 font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider">Nombre</th>
            <th class="px-4 py-2 font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider">Teléfonos</th>
            <th class="px-4 py-2 font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider">Email</th>
            <th class="px-4 py-2 font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider text-center">Acciones</th>
          </tr>
        </thead>
        <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
          {% for c in cliente.contactos.all %}
          <tr class="hover:bg-gray-50 dark:hover:bg-gray-800">
            <td class="px-4 py-2 text-gray-800 dark:text-gray-100">{{ c.nombre }} {{ c.apellidos }}</td>
            <td class="px-4 py-2 text-gray-800 dark:text-gray-100">{{ c.telefono_primario }}<br>{{ c.telefono_secundario }}</td>
            <td class="px-4 py-2 text-gray-800 dark:text-gray-100">{{ c.email }}</td>
            <td class="px-4 py-2 text-center">
              <a href="{% url 'backoffice:editar_contacto' c.id %}"
                 class="inline-flex items-center px-2 py-1 text-amber-700 dark:text-amber-300 bg-amber-100 dark:bg-amber-900/30 hover:bg-amber-200 dark:hover:bg-amber-900/50 rounded"
                 title="Editar Contacto">
                <i class="fas fa-pencil-alt"></i>
              </a>
              <a href="{% url 'backoffice:eliminar_contacto' c.id %}"
                 class="inline-flex items-center px-2 py-1 text-rose-700 dark:text-rose-300 bg-rose-100 dark:bg-rose-900/30 hover:bg-rose-200 dark:hover:bg-rose-900/50 rounded ml-2"
                 title="Eliminar Contacto">
                <i class="fas fa-trash-alt"></i>
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="px-4 py-4 text-center text-gray-500 dark:text-gray-400">No hay contactos registrados.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
</main>

<!-- MODAL CREAR CONTACTO -->
<div id="modal-contacto" class="fixed inset-0 hidden items-center justify-center bg-black/40 backdrop-blur-sm z-50" aria-hidden="true">
  <div class="bg-white dark:bg-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-3xl relative border border-gray-200 dark:border-gray-700">
    <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white" onclick="closeModal()" aria-label="Cerrar">
      <i class="fas fa-times text-lg"></i>
    </button>
    <h3 class="text-lg font-bold mb-4 text-gray-900 dark:text-white">Agregar Contacto</h3>

    <form method="POST" action="{% url 'backoffice:crear_contacto' cliente.id %}" novalidate>
      {% csrf_token %}

      <!-- Datos personales -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 mb-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nombre</label>
          <input type="text" name="nombre"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Apellidos</label>
          <input type="text" name="apellidos"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Carné de Identidad</label>
          <input type="text" name="carnet_identidad"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Pasaporte / Licencia</label>
          <input type="text" name="pasaporte_licencia"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 mb-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nacionalidad</label>
          <input type="text" name="nacionalidad"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Teléfono Primario</label>
          <input type="tel" name="telefono_primario" autocomplete="tel"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Teléfono Secundario</label>
          <input type="tel" name="telefono_secundario"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
      </div>

      <!-- Dirección -->
      <h4 class="font-semibold text-sm text-gray-900 dark:text-white mb-2">Dirección</h4>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 mb-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Calle</label>
          <input type="text" name="calle"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">No.</label>
          <input type="text" name="numero"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Entre calle</label>
          <input type="text" name="entre_calle"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 mb-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Y calle</label>
          <input type="text" name="y_calle"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Apto / Reparto</label>
          <input type="text" name="apto_reparto"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Piso</label>
          <input type="text" name="piso"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 mb-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Municipio</label>
          <input type="text" name="municipio"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Provincia</label>
          <input type="text" name="provincia"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">ZIP</label>
          <input type="text" name="zip_code" autocomplete="postal-code"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
      </div>

      <!-- Otros -->
      <h4 class="font-semibold text-sm text-gray-900 dark:text-white mb-2">Otros</h4>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Fecha de Nacimiento</label>
          <input type="date" name="fecha_nacimiento"
                 class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Observaciones</label>
          <textarea name="observaciones" rows="2"
                    class="mt-1 w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400"></textarea>
        </div>
      </div>

      <div class="mt-4 flex gap-2">
        <button type="submit" class="px-4 py-2 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400">
          Guardar Contacto
        </button>
        <button type="button" class="ml-2 px-4 py-2 rounded-full bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700" onclick="closeModal()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>

<!-- SCRIPTS -->
<script>
  document.addEventListener('DOMContentLoaded', () => openTab('cliente'));

  function openTab(tab) {
    const cliente = document.getElementById('tab-content-cliente');
    const contactos = document.getElementById('tab-content-contactos');
    const btnCliente = document.getElementById('tab-btn-cliente');
    const btnContactos = document.getElementById('tab-btn-contactos');

    cliente.classList.add('hidden');
    contactos.classList.add('hidden');
    btnCliente.classList.remove('text-indigo-600','dark:text-indigo-400','border-indigo-600','dark:border-indigo-400','border-b-2');
    btnContactos.classList.remove('text-indigo-600','dark:text-indigo-400','border-indigo-600','dark:border-indigo-400','border-b-2');
    btnCliente.classList.add('text-gray-600','dark:text-gray-300');
    btnContactos.classList.add('text-gray-600','dark:text-gray-300');

    if (tab === 'cliente') {
      cliente.classList.remove('hidden');
      btnCliente.classList.remove('text-gray-600','dark:text-gray-300');
      btnCliente.classList.add('text-indigo-600','dark:text-indigo-400','border-b-2','border-indigo-600','dark:border-indigo-400');
    } else {
      contactos.classList.remove('hidden');
      btnContactos.classList.remove('text-gray-600','dark:text-gray-300');
      btnContactos.classList.add('text-indigo-600','dark:text-indigo-400','border-b-2','border-indigo-600','dark:border-indigo-400');
    }
  }

  function openModal() {
    const modal = document.getElementById("modal-contacto");
    modal.classList.remove("hidden"); modal.classList.add("flex");
  }
  function closeModal() {
    const modal = document.getElementById("modal-contacto");
    modal.classList.add("hidden"); modal.classList.remove("flex");
  }
</script>
{% endblock %}
